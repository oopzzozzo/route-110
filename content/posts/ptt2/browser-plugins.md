+++
title = '瀏覽器外掛'
date = 2022-12-11T20:02:57+08:00
lastmod = 2022-12-11T20:02:57+08:00
categories = ['筆記']
tags = ['軟體', '批兔']
+++
上個月提到我在[架部落格]({{<ref "catepillar">}})。但一直沒進展。<br>
對於自己的東西，我情感上還是很難接受先上架再大改版。<br>
然後因為沒有看到進展，就沒啥動力去做。一念之差造成嚴重的惡性循環…<br>
在這之前就先把文章放批兔吧。<br>
<br>
上週看同事炫耀在 chrome 上裝 vim style navigator 外掛。<br>
主要功能是按空白鍵可以幫頁面上所有連結產生快捷鍵，產生的快捷鍵會標注在連結上。<br>
看起來不錯，我今天在火狐上試用。<br>
<br>
搜到到正確的外掛，載下來打開設定頁，看預設鍵有哪些。<br>
然後回剛剛的搜尋引擎頁面測試。首測怎麼按都顯示不出標注。<br>
我想可能是空白鍵遭其他功能攔截，將本用作下捲的 j 鍵設成顯示連結。測試仍無果。<br>
重新開關火狐和外掛後還是不行。<br>
<br>
一怒之下決定去看外掛的程式碼。先瞭解一下程式碼在哪裡。<br>
略讀外掛程式的壓縮檔，推（回）想火狐載外掛時應是讀 manifest.json 的設定。<br>
上網找別人的說法驗證。結果頁面上就莫名出現快捷鍵標注了……趕緊 F12 研究一番。<br>
<br>
原來 manifest.json 裡會設定 `content_scripts[*].run_at = "document_start"`。<br>
這樣 js, css 們就會在頁面載入時執行。<br>
然後我的 navigator 外掛是在頁面載入時生成連結快捷鍵，空白鍵只是顯示而已，<br>
由於火狐重開不會重載所有頁面，我起初用裝外掛前開的頁面測試當然沒東西顯示。<br>
<br>
我真笨，都打開 manifest.json 看了，還看不出問題在哪。<br>
技能不打磨，好像有點對不起上天和各種讓我會寫程式的機緣。<br>
<br>
--<br>
※ 發信站: 批踢踢兔(ptt2.cc), 來自: xxx.xxx.xxx.xxx (新加坡)<br>
